

> 服务器如何匹配URL对应的handler的？



# 一、匹配原则

**1. 匹配原则**

- 精确匹配
- 如果没有注册的路由，则删掉路径中最后一个部分继续匹配。
- **如果注册的路由不是以/结尾，则只能精确匹配请求的URL**

**例子**

比如， 路由表中三条路由  `/`, `/v/index` , `/v`.

如果请求URL是 `/v/index` :

1. 发现路由表中没有对应的条目，则去掉最后一部分继续匹配:`/v/`

    （其中 `/v/index` 没有最后的斜线，只能作精确匹配）

2. `/v/`不能匹配 `/v` ， 则去掉最后一部分继续匹配:`/`

    （**假如注册的是 `/v/`则这条条目可以匹配/v/相当于就是匹配到了 `/v/index`， 请求URL与注册路由是模糊匹配）**

3. `/`匹配成功



[参考链接](https://darjun.github.io/2019/12/05/goweb/structure/)